<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css" />

    <title>新拖延運動報名表單</title>
    <style>
        .body {
           background: rgba(0, 0, 0, 0.3);
        }

        .wrapper {
            max-width: 645px;          
            background: white;           
            margin: 10% auto;
            box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);
            border-top: solid 8px #fad312;        
            padding: 64px 32px;
            
          
        }
        .apply-form__title {
            margin: 0 ;        
            font-size: 36px;
            font-weight: bold;         
        }

        .apply-form__desc {
            margin-top: 32px;
            font-size: 14px;
            line-height: 1.5em;
        }

        .apply-form__notice {        
            font-size: 16px;
            color: #e74149;
            margin-top: 20px;           
        }


        .input-block {         
            margin-top: 55px;
        }

        .input-block__title {        
            font-size: 20px;
          
        }

        .input-block__desc {    
            font-size: 14px;     
            margin-top: 8px;
        }

        .input-block__input {
            margin-top: 20px;
        }

        .input-block__input input[type=text] {
            border: solid 1px #d0d0d0;
            font-size: 16px;           
            padding: 8px;
        }

        .input-block__input label {
            display: block;
            margin-top: 12px;
        }

        .input-block__error {
            margin-top: 8px;
            color: #e74149;
            position: absolute;
        }

        .required .input-block__title:after  {
            content: '*';
            color: #e74149;
        }

        

        .hide-error .input-block__error{
            visibility: hidden;
        }

        footer {
            background: black;
            color: #999999;
            font-size: 13px;
            text-align: center;
            padding: 24px 12px
        }

        .apply-form__submit {
            background: #fad312;
            color: black;
            font-size: 15px;
            padding: 12px 32px;           
            margin-top:48px;
            border: none;
            border-radius: 4px;
        }
		
		 /* 手機板768大小 */
		@media(max-width: 768px){
			.form__desc__input {
				 margin-top:5px;
			}
		}
    </style>
</head>

<body>
     <div class="wrapper">
         <form class="apply-form">
             <h1 class="apply-form__title">新拖延運動報名表單</h1>
             <p class="apply-form__desc">
                活動日期：2020/12/10 ~ 2020/12/11<br>
                活動地點：台北市大安區新生南路二段1號
             </p>
             <p class="apply-form__notice">
                *必填
             </p>
             <div class="input-block required hide-error">
                <div class="input-block__title">
                    暱稱
                </div>                
                <div class="input-block__input">
                     <input name="nickname" type="text" />
                </div>
                <div class="input-block__error">
                    請填寫暱稱
                </div>
             </div>
             <div class="input-block required hide-error">
                <div class="input-block__title">
                    電子郵件
                </div>               
                <div class="input-block__input">
                     <input name="email" type="text" />
                </div>
                <div class="input-block__error">
                    請填寫電子郵件
                </div>
             </div>
             <div class="input-block required hide-error">
                <div class="input-block__title">
                    手機號碼
                </div>               
                <div class="input-block__input">
                     <input name="phone" type="text" />
                </div>
                <div class="input-block__error">
                    請填寫手機號碼
                </div>
             </div>

             <div class="input-block required hide-error">
                <div class="input-block__title">
                    報名類型
                </div>               
                <div class="input-block__input">
                    <label>
                        <input name="type" value="1" type="radio"/>躺在床上用想像力實作
                    </label>
                    <label>
                        <input name="type" value="2" type="radio"/>趴在地上滑手機找現成的
                    </label>
                </div>
                <div class="input-block__error">
                    請填寫報名類型
                </div>
             </div>

             <div class="input-block required hide-error">
                <div class="input-block__title">
                    怎麼知道這個活動的?
                </div>               
                <div class="input-block__input">
                     <input name="referal" type="text" />
                </div>
                <div class="input-block__error">
                    請填寫活動
                </div>
             </div>

             <div class="input-block">
                <div class="input-block__title">
                    其他
                </div>
                <div class="input-block__desc">
                    對活動的一些建議 
                 </div>
                <div class="input-block__input">
                     <input name="nickname" type="text" />
                </div>
             </div>
             <input class="apply-form__submit" type="submit" />
             <p class="apply-form__desc">
                請勿透過表單送出您的密碼。
             </p>
         </form>
        
     </div>
     <footer>© 2020 © Copyright. All rights Reserved.</footer>
     <script>
        const element = document.querySelector('form')
        element.addEventListener('submit',function(e){
           e.preventDefault()

           let hasError = false //是否有錯誤，一開始沒有
           let values = {}
          
            const ele = document.querySelectorAll('.required')
            for(let element of ele){
                const radios = element.querySelectorAll('input[type=radio]')
                const input = element.querySelector('input[type=text]')

                let isValid = true //假設一開始有
                if(input){
                    values[input.name] = input.value
                    if(!input.value){                                    
                        isValid = false              
                    } 
                } else if (radios.length) {
                    isValid = [...radios].some(radio => radio.checked)//去找有沒有任何一個是打勾的
                    if(isValid){
                        let r = element.querySelector('input[type=radio]:checked')
                        values[r.name] = r.value
                    }
                } else {
                    continue
                }
                
                //統一檢查全部，如果沒過驗證，就把隱藏錯誤的元素(移除)，即出現錯誤提示。
                if(!isValid){
                    element.classList.remove('hide-error')      
                    hasError = true //有錯
                } else {
                    element.classList.add('hide-error') 
                }
            }

            //沒錯的話就alert
            if (!hasError) {
              alert(JSON.stringify(values))
            }
          
        })
        
    </script>
</body>
</html>